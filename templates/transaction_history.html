{% extends 'base.html' %}
{% load static %}

{% block title %}Transaction History - BorrowBuddy{% endblock %}

{% block content %}
<section class="section-padding">
    <div class="container">
        <h2 class="section-title">My Account</h2>
        <div class="dashboard-grid">
            <nav class="dashboard-nav">
                <ul>
                    <li><a href="{% url 'profile' %}">Profile Details</a></li>
                    <li><a href="{% url 'borrowed_items' %}">My Borrowed Items</a></li>
                    <li><a href="{% url 'lended_items' %}">My Lended Items</a></li>
                    <li><a href="{% url 'transaction_history' %}" class="active">Transaction History</a></li>
                    <li><a href="{% url 'logout' %}">Logout</a></li>
                </ul>
            </nav>
            <div class="dashboard-content">
                <h2>Transaction History</h2>
                <p>A list of all security deposits you have paid.</p>
                <br>
                <div class="item-list">
                    <table class="item-list-table">
                        <thead>
                            <tr>
                                <th>Item Name</th>
                                <th>Lender</th>
                                <th>Amount Paid</th>
                                <th>Date</th>
                                <th>Payment ID</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for record in transactions %}
                            <tr>
                                <td>{{ record.item.name }}</td>
                                <td>{{ record.item.owner.username }}</td>
                                <td>â‚¹{{ record.deposit_amount }}</td>
                                <td>{{ record.borrow_date|date:"Y-m-d" }}</td>
                                <td>{{ record.razorpay_payment_id }}</td>
                            </tr>
                            {% empty %}
                            <tr>
                                <td colspan="5" style="text-align: center;">You have no payment history.</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}